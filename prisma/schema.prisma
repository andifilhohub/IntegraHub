generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Pharmacy {
  id        Int       @id @default(autoincrement())
  cnpj      String    @unique
  name      String
  state     String?
  city      String?
  rawJson   Json
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  products  Product[]
}

model Product {
  id          Int       @id @default(autoincrement())
  pharmacyId  Int
  productId   Int
  title       String
  description String?
  ean         String?
  price       Float?
  stock       Int?
  shopId      Int?
  pricePromo  Float?
  wholesalePrice Float?
  wholesaleMin   Float?
  measure     Float?
  size        String?
  color       String?
  productCreatedAt DateTime?
  productUpdatedAt DateTime?
  stockUpdatedAt   DateTime?
  brand       String?
  ncm         String?
  category    String?
  imageLink   String?
  rawJson     Json
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  deletedAt   DateTime?
  isActive    Boolean   @default(true)
  lastSeenAt  DateTime?
  pharmacy    Pharmacy  @relation(fields: [pharmacyId], references: [id])

  @@unique([pharmacyId, productId], name: "pharmacy_product_unique")
}
